---
phase: 03-findings-reports
plan: 03
type: execute
wave: 2
depends_on: ["03-01", "03-02"]
files_modified:
  - src/app/(dashboard)/findings/page.tsx
  - src/components/findings/findings-table.tsx
  - src/components/findings/finding-filters.tsx
autonomous: false

must_haves:
  truths:
    - Findings list displays all 35 findings in table format
    - Severity badges show correct colors (Critical=red, High=orange, Medium=yellow, Low=green)
    - Table is sortable by clicking column headers
    - Table is filterable by severity, status, and category
    - Clicking a finding row navigates to detail page
    - Page shows total count and filtered count
  artifacts:
    - path: "src/app/(dashboard)/findings/page.tsx"
      provides: "Findings list page route"
      exports: ["default"]
    - path: "src/components/findings/findings-table.tsx"
      provides: "TanStack Table with findings data"
      exports: ["FindingsTable", "columns"]
    - path: "src/components/findings/finding-filters.tsx"
      provides: "Filter controls for severity, status, category"
      exports: ["FindingFilters"]
  key_links:
    - from: "src/app/(dashboard)/findings/page.tsx"
      to: "src/data/findings.json"
      via: "import findings"
      pattern: "import.*findings.*from.*@/data"
    - from: "src/components/findings/findings-table.tsx"
      to: "src/components/findings/severity-badge.tsx"
      via: "import { SeverityBadge }"
      pattern: "SeverityBadge"
    - from: "src/components/findings/findings-table.tsx"
      to: "src/lib/finding-utils.ts"
      via: "import { filterFindings, sortFindings }"
      pattern: "filterFindings|sortFindings"
    - from: "src/components/findings/findings-table.tsx"
      to: "/findings/[id]"
      via: "router.push or navigation"
      pattern: "router.push.*findings"
---

<objective>
Build findings list page with sortable, filterable table.

Purpose: Create the main findings management screen showing all 35 findings in a data table with column sorting, severity/status/category filters, and row click navigation to detail pages. This implements FIND-01, FIND-02, FIND-03 requirements.

Output: Findings list page with table, filters, and navigation
</objective>

<execution_context>
@/Users/admin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/admin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-findings-reports/03-RESEARCH.md
@.planning/phases/03-findings-reports/03-01-SUMMARY.md
@.planning/phases/03-findings-reports/03-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FindingFilters component</name>
  <files>src/components/findings/finding-filters.tsx</files>
  <action>
    Create finding-filters.tsx with:
    1. Import Select components from "@/components/ui/select"
    2. Import StatusBadge from "@/components/findings/status-badge"
    3. Define FilterValues interface: { severity?: string, status?: string, category?: string, assignedAuditor?: string }
    4. Define FindingFiltersProps interface: { filters: FilterValues, onFiltersChange: (filters: FilterValues) => void, availableCategories: string[], availableAuditors: string[] }
    5. Create FindingFilters component with:
       - Grid layout (4 columns on lg, 2 on md, 1 on mobile)
       - Severity dropdown: All, Critical, High, Medium, Low
       - Status dropdown: All, Draft, Under Review, Response Pending, Action Planned, Closed
       - Category dropdown: All + available categories from props
       - Assigned Auditor dropdown: All + available auditors from props
       - Clear filters button when filters are active
    6. Export FindingFilters component

    Use "use client" directive.
  </action>
  <verify>File exists at src/components/findings/finding-filters.tsx with FindingFilters export</verify>
  <done>FindingFilters component renders all filter dropdowns</done>
</task>

<task type="auto">
  <name>Task 2: Create FindingsTable component with TanStack Table</name>
  <files>src/components/findings/findings-table.tsx</files>
  <action>
    Create findings-table.tsx with:
    1. Import all TanStack Table utilities:
       - ColumnDef, SortingState, ColumnFiltersState, flexRender, getCoreRowModel, getSortedRowModel, getFilteredRowModel, useReactTable
    2. Import Table components from "@/components/ui/table"
    3. Import SeverityBadge from "@/components/findings/severity-badge"
    4. Import StatusBadge from "@/components/findings/status-badge"
    5. Import Finding type from "@/types"
    6. Import useRouter from "next/navigation"
    7. Import { calculateAge } from "@/lib/finding-utils"

    8. Define columns: ColumnDef<Finding>[] with:
       - id: "Finding ID" column (sortable)
       - title: "Title" column (sortable)
       - category: "Category" column (sortable, filterable)
       - severity: "Severity" column with SeverityBadge cell (sortable)
       - status: "Status" column with StatusBadge cell (sortable)
       - assignedAuditor: "Assigned To" column (sortable)
       - age: "Age (Days)" column with calculated age (sortable)

    9. Create FindingsTable component with:
       - data prop (Finding[])
       - onRowClick callback
       - SortingState and ColumnFiltersState management
       - useReactTable hook with all models
       - Render table with headers (clickable for sort)
       - Render table body with rows
       - Click handler on row for navigation
       - Empty state when no data

    10. Export FindingsTable and columns

    Use "use client" directive.
    Follow shadcn/ui DataTable pattern from research.
  </action>
  <verify>File exists at src/components/findings/findings-table.tsx with FindingsTable and columns exports; Age column displays days calculated from finding.createdAt using calculateAge utility</verify>
  <done>FindingsTable renders with all columns, sorting, and click navigation</done>
</task>

<task type="auto">
  <name>Task 3: Create findings list page</name>
  <files>src/app/(dashboard)/findings/page.tsx</files>
  <action>
    Create src/app/(dashboard)/findings/ directory if not exists.

    Create page.tsx with:
    1. Import findings from "@/data/findings.json"
    2. Import FindingsTable from "@/components/findings/findings-table"
    3. Import FindingFilters from "@/components/findings/finding-filters"
    4. Import { useState, useMemo } from "react"
    5. Import { filterFindings } from "@/lib/finding-utils"
    6. Import Finding type from "@/types"
    7. Import useRouter from "next/navigation"

    8. Create page component (client component with "use client"):
       - State for filters: severity, status, category, assignedAuditor
       - Memoized filtered findings using filterFindings utility
       - Extract unique categories and auditors from findings
       - Handle row click: navigate to `/findings/[id]`
       - Render page header with title "Findings" and count
       - Render FindingFilters component
       - Render FindingsTable component with filtered data
       - Show "X of Y findings" subtitle when filtered

    9. Export default page component

    Include proper page metadata if using Next.js 14 metadata API.
  </action>
  <verify>File exists at src/app/(dashboard)/findings/page.tsx with default export</verify>
  <done>Findings page displays table with all 35 findings, filters, and navigation</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Findings list page with sortable, filterable table displaying all 35 findings</what-built>
  <how-to-verify>
    1. Start dev server: npm run dev
    2. Navigate to http://localhost:3000/findings
    3. Verify table displays all 35 findings
    4. Verify severity badges show correct colors (Critical=red, High=orange, Medium=yellow, Low=green)
    5. Click column headers to verify sorting works
    6. Use filters to verify filtering by severity, status, category
    7. Click a finding row to verify it navigates to detail page (will 404 - that's expected)
    8. Verify count updates when filters are applied
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues</resume-signal>
</task>

</tasks>

<verification>
- FindingFilters renders all 4 filter dropdowns
- FindingsTable uses TanStack Table with sorting and filtering
- All 7 columns render correctly (id, title, category, severity, status, assignedAuditor, age)
- Severity badges use correct colors
- Status badges use correct colors
- Clicking row triggers navigation
- Filters reduce the displayed results
- Empty state shows when no results match filters
</verification>

<success_criteria>
- FIND-01: Severity badges with correct colors
- FIND-02: Filterable columns (id, title, category, severity, status, assignedAuditor, age)
- FIND-03: Status dropdown filter (all 5 statuses)
- FIND-04: Click on finding opens detail page
- All 35 findings display
</success_criteria>

<output>
After completion, create `.planning/phases/03-findings-reports/03-03-SUMMARY.md`
</output>
