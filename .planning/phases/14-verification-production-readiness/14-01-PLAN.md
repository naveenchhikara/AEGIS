---
phase: 14-verification-production-readiness
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/06-observation-lifecycle/06-VERIFICATION.md
  - .planning/phases/07-auditee-portal-evidence/07-VERIFICATION.md
autonomous: true

must_haves:
  truths:
    - "Phase 6 VERIFICATION.md documents verification status for all 11 OBS requirements"
    - "Phase 7 VERIFICATION.md documents verification status for all 12 AUD/EVID requirements"
    - "Each verification report cites file paths and line numbers as evidence"
    - "Build verification confirms TypeScript compilation passes for relevant files"
  artifacts:
    - path: ".planning/phases/06-observation-lifecycle/06-VERIFICATION.md"
      provides: "Phase 6 observation lifecycle verification report"
      contains: "OBS-01"
    - path: ".planning/phases/07-auditee-portal-evidence/07-VERIFICATION.md"
      provides: "Phase 7 auditee portal and evidence verification report"
      contains: "AUD-01"
  key_links:
    - from: "06-VERIFICATION.md"
      to: "06-*-SUMMARY.md"
      via: "Evidence drawn from plan summaries and code grep"
      pattern: "OBS-\\d+"
    - from: "07-VERIFICATION.md"
      to: "07-*-SUMMARY.md"
      via: "Evidence drawn from plan summaries and code grep"
      pattern: "AUD-\\d+"
---

<objective>
Create VERIFICATION.md reports for Phase 6 (Observation Lifecycle) and Phase 7 (Auditee Portal & Evidence) following the established template from Phase 11.

Purpose: Phases 6 and 7 are code-complete but lack formal verification documentation. This plan creates evidence-based verification reports that cite file paths, line numbers, and grep results to confirm all 23 requirements (11 OBS + 7 AUD + 5 EVID) are satisfied.

Output: Two VERIFICATION.md files with observable truths, required artifacts, key link verification, requirements coverage, anti-patterns check, and build verification.
</objective>

<execution_context>
@/Users/admin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/admin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/11-auth-security-hardening/11-01-VERIFICATION.md
@.planning/phases/06-observation-lifecycle/06-01-SUMMARY.md
@.planning/phases/06-observation-lifecycle/06-02-SUMMARY.md
@.planning/phases/06-observation-lifecycle/06-03-SUMMARY.md
@.planning/phases/06-observation-lifecycle/06-04-SUMMARY.md
@.planning/phases/06-observation-lifecycle/06-05-SUMMARY.md
@.planning/phases/06-observation-lifecycle/06-06-SUMMARY.md
@.planning/phases/06-observation-lifecycle/06-07-SUMMARY.md
@.planning/phases/07-auditee-portal-evidence/07-01-SUMMARY.md
@.planning/phases/07-auditee-portal-evidence/07-02-SUMMARY.md
@.planning/phases/07-auditee-portal-evidence/07-03-SUMMARY.md
@.planning/phases/07-auditee-portal-evidence/07-04-SUMMARY.md
@.planning/phases/07-auditee-portal-evidence/07-05-SUMMARY.md
@.planning/phases/07-auditee-portal-evidence/07-06-SUMMARY.md
@.planning/phases/07-auditee-portal-evidence/07-07-SUMMARY.md
@.planning/phases/07-auditee-portal-evidence/07-08-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Phase 6 Observation Lifecycle VERIFICATION.md</name>
  <files>.planning/phases/06-observation-lifecycle/06-VERIFICATION.md</files>
  <action>
Create a comprehensive verification report for Phase 6 (Observation Lifecycle) following the Phase 11 VERIFICATION.md template format.

**Phase 6 Goal:** Auditors can create observations that flow through a 7-state workflow with maker-checker approval, multi-dimensional tagging, and repeat finding detection.

**Requirements to verify (11 total):** OBS-01 through OBS-11.

**Evidence gathering approach:**

1. **Read all 7 plan SUMMARYs** (06-01 through 06-07) to understand what was built.

2. **For each OBS requirement, grep the codebase** for implementation evidence:
   - OBS-01 (create observation): grep for observation creation server action in `src/data-access/observations.ts` or similar, check for condition/criteria/cause/effect/recommendation fields
   - OBS-02 (7-state lifecycle): grep for state enum in `prisma/schema.prisma` (ObservationStatus enum), check state machine in `src/lib/state-machine.ts`
   - OBS-03 (immutable timeline): grep for ObservationTimeline model in schema, check timeline creation in transition actions
   - OBS-04 (maker-checker): grep for REVIEWED/SUBMITTED transition validation, check role guards
   - OBS-05 (Manager closes Low/Medium): grep for close transition in state machine with severity check
   - OBS-06 (CAE closes High/Critical): grep for CAE role check in close transition
   - OBS-07 (resolved during fieldwork): grep for resolvedDuringFieldwork field, check resolve action
   - OBS-08 (multi-dimensional tagging): grep for riskCategory, auditArea, severity, branchId fields on Observation model
   - OBS-09 (repeat detection): grep for repeat finding logic in `src/data-access/observations.ts`, check pg_trgm similarity
   - OBS-10 (severity auto-escalation): grep for escalateSeverity function in state machine
   - OBS-11 (confirm/dismiss repeat): grep for confirmRepeat/dismissRepeat actions

3. **Verify artifacts exist** with line counts and exports (use `wc -l` and `grep export`).

4. **Check key links** (imports/calls between files).

5. **Check for anti-patterns** (TODO, FIXME, HACK, stub, placeholder in Phase 6 files).

6. **Build verification:** Run `npx tsc --noEmit` and check for Phase 6 file errors.

**Report structure (follow Phase 11 template exactly):**

- Frontmatter: phase, verified timestamp, status, score
- Goal Achievement section with Observable Truths table
- Required Artifacts table
- Key Link Verification table
- Requirements Coverage table (OBS-01 through OBS-11)
- Anti-Patterns Found table
- Build Verification section
- Phase Success Criteria Verification table (8 criteria from ROADMAP.md)
- Human Verification Required section (reference 9 test groups from 06-07-PLAN.md)
- Verification Conclusion
  </action>
  <verify>
- File exists: `ls .planning/phases/06-observation-lifecycle/06-VERIFICATION.md`
- Contains all 11 requirements: `grep -c "OBS-" .planning/phases/06-observation-lifecycle/06-VERIFICATION.md` returns >= 11
- Contains evidence (file paths): `grep -c "src/" .planning/phases/06-observation-lifecycle/06-VERIFICATION.md` returns >= 10
- Has frontmatter: `head -5 .planning/phases/06-observation-lifecycle/06-VERIFICATION.md` shows YAML frontmatter
  </verify>
  <done>Phase 6 VERIFICATION.md exists with all 11 OBS requirements verified, citing file paths and line numbers as evidence, following Phase 11 template format.</done>
  </task>

<task type="auto">
  <name>Task 2: Create Phase 7 Auditee Portal & Evidence VERIFICATION.md</name>
  <files>.planning/phases/07-auditee-portal-evidence/07-VERIFICATION.md</files>
  <action>
Create a comprehensive verification report for Phase 7 (Auditee Portal & Evidence) following the Phase 11 VERIFICATION.md template format.

**Phase 7 Goal:** Auditees can view findings assigned to their branch, submit responses, upload evidence, and see deadline countdowns.

**Requirements to verify (12 total):** AUD-01 through AUD-07, EVID-01 through EVID-05.

**Evidence gathering approach:**

1. **Read all 8 plan SUMMARYs** (07-01 through 07-08) to understand what was built.

2. **For each requirement, grep the codebase:**
   - AUD-01 (branch-scoped): grep for branchId filter in auditee data access, check RLS or WHERE clause
   - AUD-02 (submit response): grep for submitResponse/addResponse action in observations data access
   - AUD-03 (upload evidence): grep for file upload handler, check accepted types (PDF, JPEG, PNG, XLSX, DOCX), 10MB limit
   - AUD-04 (timestamped immutable): grep for createdAt on response, check no update/delete actions exist
   - AUD-05 (compliance action): grep for compliance submission action
   - AUD-06 (deadline countdown): grep for dueDate/deadline calculation, check UI countdown component
   - AUD-07 (overdue highlighting): grep for overdue status check, red/warning styling
   - EVID-01 (drag-and-drop): grep for dropzone/drag-drop component, progress indicator
   - EVID-02 (S3 Mumbai): grep for S3 configuration, check region ap-south-1, tenant-scoped paths, SSE-S3
   - EVID-03 (file type validation): grep for MIME type checks, file extension validation, executable blocking
   - EVID-04 (timeline integration): grep for evidence in timeline rendering
   - EVID-05 (download): grep for presigned URL generation, download action

3. **Verify artifacts exist** with file metrics.

4. **Check key links** between auditee components and data access layer.

5. **Anti-pattern scan** on Phase 7 files.

6. **Build verification.**

**Report structure:** Same as Task 1, following Phase 11 template. Include Human Verification Required section for auditee workflow testing.
</action>
<verify>

- File exists: `ls .planning/phases/07-auditee-portal-evidence/07-VERIFICATION.md`
- Contains all 12 requirements: `grep -c -E "AUD-|EVID-" .planning/phases/07-auditee-portal-evidence/07-VERIFICATION.md` returns >= 12
- Contains evidence: `grep -c "src/" .planning/phases/07-auditee-portal-evidence/07-VERIFICATION.md` returns >= 10
- Has frontmatter with score
  </verify>
  <done>Phase 7 VERIFICATION.md exists with all 12 AUD/EVID requirements verified, citing file paths and line numbers as evidence, following Phase 11 template format.</done>
  </task>

</tasks>

<verification>
- Both VERIFICATION.md files exist in their respective phase directories
- Phase 6 report covers OBS-01 through OBS-11 (11 requirements)
- Phase 7 report covers AUD-01 through AUD-07 and EVID-01 through EVID-05 (12 requirements)
- Both reports follow Phase 11 template format (frontmatter, truths table, artifacts table, key links, requirements coverage, anti-patterns, build verification)
- Evidence is concrete (file paths, line numbers, grep results), not vague
</verification>

<success_criteria>

1. `.planning/phases/06-observation-lifecycle/06-VERIFICATION.md` exists with all 11 OBS requirements verified
2. `.planning/phases/07-auditee-portal-evidence/07-VERIFICATION.md` exists with all 12 AUD/EVID requirements verified
3. Both reports cite file paths and line numbers as evidence
4. Both reports identify human verification items that require PostgreSQL runtime testing
   </success_criteria>

<output>
After completion, create `.planning/phases/14-verification-production-readiness/14-01-SUMMARY.md`
</output>
