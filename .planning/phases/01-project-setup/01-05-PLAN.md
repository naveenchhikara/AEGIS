---
phase: 01-project-setup
plan: 05
type: execute
wave: 5
depends_on: [01-03]
files_modified:
  - src/components/layout/sidebar.tsx
  - src/components/layout/topbar.tsx
  - src/app/(dashboard)/layout.tsx
  - src/lib/nav-items.ts
autonomous: false

must_haves:
  truths:
    - Dashboard layout has left sidebar and top bar
    - Sidebar shows 7 menu items: Dashboard, Compliance Registry, Audit Plan, Findings, Board Report, Auditee Portal, Settings
    - Top bar has logo, language switcher, notifications bell, user profile dropdown
    - Sidebar collapses on mobile (hamburger menu)
    - Active route is highlighted in sidebar
  artifacts:
    - path: "src/components/layout/sidebar.tsx"
      provides: "Left navigation sidebar component"
      exports: ["AppSidebar"]
    - path: "src/components/layout/topbar.tsx"
      provides: "Top bar with logo and user controls"
      exports: ["TopBar"]
    - path: "src/app/(dashboard)/layout.tsx"
      provides: "Dashboard layout wrapper"
      contains: "Sidebar + TopBar + children"
    - path: "src/lib/nav-items.ts"
      provides: "Navigation menu configuration"
      contains: "7 menu items with routes and icons"
  key_links:
    - from: "src/components/layout/sidebar.tsx"
      to: "/dashboard, /compliance, /audit-plan, /findings, /board-report"
      via: "Link components"
      pattern: "Link href='/'"
    - from: "src/app/(dashboard)/layout.tsx"
      to: "src/components/layout/sidebar.tsx"
      via: "import"
      pattern: "import.*AppSidebar"
---

<objective>
Create dashboard layout with sidebar navigation and top bar.

Purpose: Build the main application shell with left sidebar (7 menu items), top bar (logo, language switcher, notifications, user profile), mobile responsiveness, and active route highlighting.

Output: Dashboard layout with navigation ready for all pages
</objective>

<execution_context>
@/Users/admin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/admin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-project-setup/01-CONTEXT.md
@.planning/phases/01-project-setup/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create navigation items configuration</name>
  <files>src/lib/nav-items.ts</files>
  <action>
    Create src/lib/nav-items.ts with navigation configuration:

    Define 7 menu items with:
    - id: unique identifier
    - label: display text
    - href: route path
    - icon: lucide-react icon name

    Items:
    1. Dashboard -> /dashboard (LayoutDashboard icon)
    2. Compliance Registry -> /compliance (FileText icon)
    3. Audit Plan -> /audit-plan (Calendar icon)
    4. Findings -> /findings (AlertCircle icon)
    5. Board Report -> /board-report (BarChart3 icon)
    6. Auditee Portal -> /auditee (Users icon)
    7. Settings -> /settings (Settings icon)

    Export as NAV_ITEMS constant.
    Export type NavItem.

    Add placeholder note: Auditee Portal and Settings are placeholders for future phases.
  </action>
  <verify>File exists with NAV_ITEMS array containing 7 menu items</verify>
  <done>Navigation configuration with 7 menu items created</done>
</task>

<task type="auto">
  <name>Task 2: Create sidebar component</name>
  <files>src/components/layout/sidebar.tsx</files>
  <action>
    Create src/components/layout/ directory and sidebar.tsx:

    1. Add "use client" directive
    2. Import: Sidebar, SidebarContent, SidebarMenu, SidebarMenuItem, SidebarMenuButton from @/components/ui/sidebar
    3. Import: Link from 'next/link', usePathname from 'next/navigation'
    4. Import: NAV_ITEMS from '@/lib/nav-items'
    5. Import appropriate icons from lucide-react

    Component features:
    - Render all 7 NAV_ITEMS
    - Use Link components for client-side routing
    - Highlight active route using usePathname()
    - Mobile drawer support (shadcn Sidebar handles this)
    - Collapse button for desktop
    - AEGIS logo/name at top

    Styling:
    - Use shadcn Sidebar component
    - Active item: different background color
    - Hover states on menu items
    - Collapsible on desktop (trigger button)

    Export: AppSidebar component
  </action>
  <verify>Sidebar component exists and renders 7 menu items</verify>
  <done>Sidebar navigation component with active highlighting created</done>
</task>

<task type="auto">
  <name>Task 3: Create top bar component</name>
  <files>src/components/layout/topbar.tsx</files>
  <action>
    Create src/components/layout/topbar.tsx:

    1. Add "use client" directive
    2. Import: Button, DropdownMenu from @/components/ui
    3. Import: Bell, Globe, User, ChevronDown icons from lucide-react
    4. Import: LANGUAGES from '@/lib/constants'

    Component structure (left to right):
    - Left: Hamburger menu button (mobile only), Logo/brand name
    - Right: Language switcher (globe + current code), Notifications bell, User profile dropdown

    User profile dropdown items:
    - Profile (placeholder)
    - Settings (links to /settings)
    - Logout (placeholder - returns to /login)

    Language switcher:
    - Dropdown with 4 language options
    - Shows current selection

    Notifications:
    - Bell icon with badge (show red dot if notifications > 0)
    - For now: show badge with "3" as placeholder

    Export: TopBar component
  </action>
  <verify>Top bar component exists with logo, language switcher, notifications, user menu</verify>
  <done>Top bar with user controls created</done>
</task>

<task type="auto">
  <name>Task 4: Create dashboard layout</name>
  <files>src/app/(dashboard)/layout.tsx</files>
  <action>
    Create src/app/(dashboard)/layout.tsx:

    1. Import AppSidebar from '@/components/layout/sidebar'
    2. Import TopBar from '@/components/layout/topbar'
    3. Create route group layout for dashboard pages

    Layout structure:
    - SidebarProvider from shadcn/ui (wraps everything)
    - Left: AppSidebar (collapsible)
    - Right: TopBar + children content area
    - Responsive: sidebar becomes drawer on mobile

    Desktop layout:
    | Sidebar | TopBar          |
    |         |-----------------|
    |         | children        |

    Mobile layout:
    [TopBar (hamburger) ]
    [Drawer (sidebar)   ]
    [children           ]

    Add metadata for dashboard pages.
  </action>
  <verify>Layout exists at src/app/(dashboard)/layout.tsx with sidebar and topbar</verify>
  <done>Dashboard layout wrapper created for all protected pages</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Dashboard layout with sidebar navigation and top bar</what-built>
  <how-to-verify>
    1. Start dev server: pnpm dev
    2. Visit http://localhost:3000 (or any route in dashboard group)
    3. Verify:
       - Sidebar appears on left with all 7 menu items
       - Each menu item has icon and label
       - Clicking menu items navigates (will 404, pages not created yet)
       - Active route is highlighted in sidebar
       - Top bar shows logo, language switcher, notifications bell, user profile
       - Language switcher dropdown shows 4 languages
       - User profile dropdown shows Profile, Settings, Logout
       - On mobile: sidebar hidden, hamburger menu visible in topbar
       - Clicking hamburger opens sidebar drawer
  </how-to-verify>
  <resume-signal>Type "approved" if dashboard layout works, or describe issues</resume-signal>
</task>

</tasks>

<verification>
- Route group (dashboard) created with separate layout
- Sidebar renders all 7 NAV_ITEMS
- Active route highlighting works via usePathname()
- Top bar has all required elements
- Mobile responsiveness works (hamburger menu)
- Client-side routing works with Link components
</verification>

<success_criteria>
- Dashboard layout has left sidebar and top bar
- 7 menu items visible and clickable
- Active route highlighted
- Top bar has logo, language switcher, notifications, user profile
- Mobile: hamburger menu opens sidebar drawer
- All navigation uses client-side routing
</success_criteria>

<output>
After completion, create `.planning/phases/01-project-setup/01-05-SUMMARY.md`
</output>
