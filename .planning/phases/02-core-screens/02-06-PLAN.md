---
phase: 02-core-screens
plan: 06
type: execute
wave: 5
depends_on: [02-02, 02-03, 02-04, 02-05]
files_modified:
  - src/app/(dashboard)/dashboard/page.tsx
  - src/app/(dashboard)/compliance/page.tsx
  - src/app/(dashboard)/audit-plan/page.tsx
autonomous: false

must_haves:
  truths:
    - Dashboard page displays all 6 widgets in responsive grid layout
    - Dashboard shows bank name and loads all data from JSON files
    - Compliance registry page displays table with filters and trend chart
    - Compliance table is sortable and filterable with URL state
    - Clicking table row opens requirement detail dialog
    - Audit plan page displays calendar view and engagement cards
    - Audit filter bar works and updates URL
    - All screens load without page refresh
    - All screens are responsive (mobile, tablet, desktop)
    - Empty states display where appropriate
    - Loading states show during navigation
  artifacts:
    - path: "src/app/(dashboard)/dashboard/page.tsx"
      provides: "Main dashboard page with all widgets"
      exports: ["default page export"]
      contains: "6 dashboard widgets in grid layout, data imports"
    - path: "src/app/(dashboard)/compliance/page.tsx"
      provides: "Compliance registry page with table, filters, chart"
      exports: ["default page export"]
      contains: "filter bar, data table, trend chart, detail dialog state"
    - path: "src/app/(dashboard)/audit-plan/page.tsx"
      provides: "Audit plan page with calendar and cards"
      exports: ["default page export"]
      contains: "filter bar, calendar view, engagement cards list"
  key_links:
    - from: "src/app/(dashboard)/dashboard/page.tsx"
      to: "@/data"
      via: "data imports for all widgets"
      pattern: "import.*from '@/data'"
    - from: "src/app/(dashboard)/dashboard/page.tsx"
      to: "src/components/dashboard/*"
      via: "widget imports"
      pattern: "import.*Widget.*from '@/components/dashboard'"
    - from: "src/app/(dashboard)/compliance/page.tsx"
      to: "src/components/compliance/*"
      via: "compliance component imports"
      pattern: "import.*from '@/components/compliance'"
    - from: "src/app/(dashboard)/compliance/page.tsx"
      to: "@/data/compliance-requirements"
      via: "data import and filtering"
      pattern: "complianceRequirements"
    - from: "src/app/(dashboard)/audit-plan/page.tsx"
      to: "src/components/audits/*"
      via: "audit component imports"
      pattern: "import.*from '@/components/audits'"
    - from: "src/app/(dashboard)/audit-plan/page.tsx"
      to: "@/data/audit-plans"
      via: "data import and filtering"
      pattern: "auditPlans"
---

<objective>
Compose and connect all Phase 2 components into three working pages: Dashboard, Compliance Registry, and Audit Plan.

Purpose: Build the actual page files that render all components created in previous plans. Wire up data connections, implement state management for dialogs and filters, and ensure all screens are responsive with loading/empty states.

Output: Three fully functional core screens meeting all DASH, COMP, AUDT, and NAV requirements
</objective>

<execution_context>
@/Users/admin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/admin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-core-screens/02-RESEARCH.md
@.planning/phases/02-core-screens/02-02-SUMMARY.md
@.planning/phases/02-core-screens/02-03-SUMMARY.md
@.planning/phases/02-core-screens/02-04-SUMMARY.md
@.planning/phases/02-core-screens/02-05-SUMMARY.md
@.planning/phases/01-project-setup/01-06-SUMMARY.md
@.planning/phases/01-project-setup/01-10-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build Dashboard page with all widgets</name>
  <files>src/app/(dashboard)/dashboard/page.tsx</files>
  <action>
    Update existing src/app/(dashboard)/dashboard/page.tsx (from Phase 1):

    Add "use client" directive.

    Import: bankProfile, complianceRequirements, auditPlans, findings, complianceCalendar from '@/data', all 6 dashboard widgets from '@/components/dashboard'

    Page structure:
    - Page title and metadata
    - Header section with bank name: {bankProfile.name}
    - Subtitle: "Welcome to AEGIS - Compliance Dashboard"
    - Responsive grid layout:
      * Row 1: HealthScoreWidget (left), QuickActionsWidget (right)
      * Row 2: CountCardsWidget (full width, 4 cards)
      * Row 3: AuditCoverageDonut (left), RiskIndicatorWidget (right)
      * Row 4: RegulatoryCalendarWidget (full width)
    - Grid classes: grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6

    Data connections:
    - All widgets receive data via imports (props optional)
    - Widgets calculate their own metrics from data

    Loading state:
    - Add Suspense boundary around content
    - Show skeleton while data loads (optional for prototype)

    Replace placeholder content from Phase 1 with full widget composition.

    Export: default page component
  </action>
  <verify>Dashboard page renders all 6 widgets with grid layout</verify>
  <done>Dashboard page composed with all widgets and data connections</done>
</task>

<task type="auto">
  <name>Task 2: Build Compliance Registry page with table and chart</name>
  <files>src/app/(dashboard)/compliance/page.tsx</files>
  <action>
    Update existing src/app/(dashboard)/compliance/page.tsx (from Phase 1):

    Add "use client" directive.

    Import: useState from 'react', useSearchParams from 'next/navigation', complianceRequirements from '@/data', ComplianceFilterBar, ComplianceDataTable, RequirementDialog, ComplianceTrendChart from '@/components/compliance', Card, CardContent, CardHeader, CardTitle from '@/components/ui/card', type ComplianceRequirement from '@/types

    Page structure:
    - Page title: "Compliance Registry"
    - Subtitle: "RBI Compliance Requirements Tracking"
    - ComplianceFilterBar (top)
    - Card with ComplianceDataTable (main content)
    - Card with ComplianceTrendChart (below table)

    State management:
    - selectedRequirement state for dialog
    - handleRowClick: sets selectedRequirement
    - closeDialog: clears selectedRequirement
    - Filter by URL params (read from useSearchParams)
    - Filter data before passing to table

    Trend chart data:
    - Pass dummy 6-month trend data (per plan 02-03)
    - Scores: 72, 75, 78, 82, 85, 88

    Dialog:
    - RequirementDialog renders when selectedRequirement is set
    - onOpenChange clears selectedRequirement

    Empty state:
    - If filtered data is empty, show "No requirements found" message

    Export: default page component
  </action>
  <verify>Compliance page has filter bar, table, trend chart, and dialog</verify>
  <done>Compliance Registry page with full functionality</done>
</task>

<task type="auto">
  <name>Task 3: Build Audit Plan page with calendar and cards</name>
  <files>src/app/(dashboard)/audit-plan/page.tsx</files>
  <action>
    Update existing src/app/(dashboard)/audit-plan/page.tsx (from Phase 1):

    Add "use client" directive.

    Import: useState, useMemo from 'react', useSearchParams from 'next/navigation', auditPlans from '@/data', AuditFilterBar, AuditCalendar, AuditEngagementCard from '@/components/audits, Card, CardContent, CardHeader, CardTitle from '@/components/ui/card, type AuditPlan from '@/types

    Page structure:
    - Page title: "Audit Plan"
    - Subtitle: "Annual Audit Planning & Tracking"
    - AuditFilterBar (top)
    - Two view tabs (optional) or stacked:
      * Calendar View: AuditCalendar in Card
      * Card View: Grid of AuditEngagementCard components

    State management:
    - selectedAudit state for detail view (optional, placeholder for now)
    - Filter by URL params (type from useSearchParams)
    - Filter data before passing to components

    Calendar:
    - handleAuditClick: logs audit or shows placeholder detail
    - Pass filtered audits to calendar

    Cards view:
    - Grid: grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4
    - Map filtered audits to AuditEngagementCard
    - Click handler for navigation to detail (placeholder)

    Empty state:
    - If no audits match filter, show "No audits found" message

    Export: default page component
  </action>
  <verify>Audit Plan page has filter bar, calendar view, and card grid</verify>
  <done>Audit Plan page with calendar and engagement cards</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Three complete core screens: Dashboard, Compliance Registry, Audit Plan</what-built>
  <how-to-verify>
    1. Start dev server: pnpm dev
    2. Visit http://localhost:3000/dashboard

    DASHBOARD VERIFICATION:
    - Bank name "Sahyadri Urban Co-operative Bank Ltd" displays
    - Health score shows 0-100 with color indicator
    - Donut chart shows audit coverage
    - 4 count cards display: Total, Critical, Open, Overdue findings
    - Risk indicator shows overall level and factors
    - Regulatory calendar shows upcoming deadlines
    - Quick action buttons are visible
    - Layout is responsive (check on mobile/tablet breakpoints)

    COMPLIANCE VERIFICATION:
    - Navigate to /compliance (sidebar or URL)
    - Filter bar shows category and status dropdowns
    - Table displays 50+ requirements
    - Click column headers to sort (reference, due date)
    - Change filters: URL updates, table filters
    - Click table row: detail dialog opens
    - Dialog shows full requirement info
    - Trend chart displays with 6-month data

    AUDIT PLAN VERIFICATION:
    - Navigate to /audit-plan (sidebar or URL)
    - Filter bar shows audit type dropdown
    - Calendar view shows audit events by month
    - Events are color-coded by status
    - Card grid shows all engagement cards
    - Cards show progress bars
    - Filter by type: calendar and cards update

    GENERAL:
    - All navigation client-side (no page refresh)
    - All pages responsive on mobile
    - No console errors
  </how-to-verify>
  <resume-signal>Type "approved" if all screens work correctly, or describe issues</resume-signal>
</task>

</tasks>

<verification>
- Dashboard page renders all 6 widgets in responsive grid
- Dashboard displays bank name from data
- Compliance page has filter bar, sortable table, detail dialog, trend chart
- Compliance table filters by category and status
- Compliance table sorts columns
- Compliance detail dialog opens on row click
- Audit plan page has filter bar, calendar, and card grid
- Audit calendar shows events with correct colors
- Audit cards show progress bars
- Filters use URL-based state (refresh persists state)
- All pages are responsive
- Client-side navigation works
- TypeScript compiles without errors
</verification>

<success_criteria>
- DASH-01 through DASH-06: All dashboard widgets working
- COMP-01 through COMP-06: Table filters/sorts, badges, detail dialog, trend chart
- AUDT-01 through AUDT-05: Calendar view, engagement cards, type filter, progress bars
- NAV-02, NAV-03: Top bar user controls, responsive layout
- All 21 success criteria from ROADMAP.md met
- Data from Phase 1 JSON files loads correctly
- Empty states display where appropriate
- Loading states show (Suspense or skeleton)
- All screens mobile-friendly
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-screens/02-06-SUMMARY.md`
</output>
