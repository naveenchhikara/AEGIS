---
phase: 04-polish-deploy
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/(dashboard)/layout.tsx
  - src/app/(dashboard)/dashboard/page.tsx
  - src/app/(dashboard)/compliance/page.tsx
  - src/app/(dashboard)/audit-plans/page.tsx
  - src/app/(dashboard)/findings/page.tsx
  - src/app/(dashboard)/reports/page.tsx
autonomous: true

must_haves:
  truths:
    - "User can view all screens on a 375px mobile viewport without horizontal page scrolling"
    - "Touch targets (buttons, links, filters) are easily tappable on mobile devices (min 44px)"
    - "Data tables scroll horizontally within their own containers on narrow viewports, not the entire page"
    - "Dashboard widgets and cards stack into a readable layout on mobile"
    - "Sidebar collapses to hamburger menu on mobile"
    - "Content is comfortably readable on tablet (768px) and desktop (1280px) with appropriate spacing"
  artifacts:
    - path: "src/app/(dashboard)/layout.tsx"
      provides: "Responsive padding and overflow handling"
      contains: "p-4 md:p-6"
    - path: "src/app/(dashboard)/dashboard/page.tsx"
      provides: "Responsive grid layout for widgets"
      contains: "grid-cols-1"
  key_links:
    - from: "src/app/(dashboard)/layout.tsx"
      to: "all dashboard pages"
      via: "responsive container padding"
      pattern: "p-4 md:p-6|overflow-auto"
    - from: "data table components"
      to: "mobile viewport"
      via: "overflow-x-auto wrapper"
      pattern: "overflow-x-auto"
---

<objective>
Polish responsive design across all screens for mobile (375px+), tablet (768px+), and desktop (1024px+). Ensure no horizontal scrolling, adequate touch targets, and adaptive layouts.

Purpose: Fulfill success criteria 5-7 (mobile-friendly, no horizontal scrolling, adequate touch targets) and 12-13 (demo works on mobile/tablet).
Output: All screens render cleanly across mobile, tablet, and desktop breakpoints.
</objective>

<execution_context>
@/Users/admin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/admin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-polish-deploy/04-RESEARCH.md
@src/app/(dashboard)/layout.tsx
@src/app/(dashboard)/dashboard/page.tsx
@src/components/layout/top-bar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix dashboard layout container and dashboard page responsive grid</name>
  <files>
    src/app/(dashboard)/layout.tsx
    src/app/(dashboard)/dashboard/page.tsx
    src/components/layout/top-bar.tsx
  </files>
  <action>
    1. **Update `src/app/(dashboard)/layout.tsx`:**
       - Change the content container from `p-6` to `p-4 md:p-6` for mobile-friendly padding
       - Ensure `overflow-auto` is on the scrollable content area (it already has `overflow-auto` -- confirm it works with nested content)
       - The sidebar already uses `collapsible="icon"` which handles mobile collapse via SidebarTrigger

    2. **Update `src/components/layout/top-bar.tsx`:**
       - Ensure touch targets: all buttons in the top bar should have minimum 44x44px hit areas on mobile
       - The notification bell and user avatar buttons currently use `h-8 w-8` -- change to `h-8 w-8 md:h-8 md:w-8` but add `min-h-11 min-w-11` for touch targets on mobile (44px = 2.75rem = ~11 in Tailwind)
       - Actually, simpler approach: wrap small buttons in a touch-target area. Use `p-1.5` to expand the clickable area. Or use `size="icon"` with `className="h-9 w-9"` which is close enough to 44px.
       - On mobile, hide the bank name to save horizontal space: `<h2 className="hidden sm:block text-base ...">` or truncate with `truncate max-w-[200px] md:max-w-none`
       - Language switcher text: keep compact (`size="sm"` is fine, but ensure the dropdown menu items have adequate height)

    3. **Update `src/app/(dashboard)/dashboard/page.tsx`:**
       - Read the current dashboard page to understand widget layout
       - Apply responsive grid: `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6`
       - Count cards (Total Findings, Critical Findings, etc.): `grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4`
       - Charts: ensure minimum height `min-h-[200px] md:min-h-[280px]`
       - Quick action buttons: stack vertically on mobile `flex flex-col sm:flex-row gap-2`
       - Calendar widget: ensure it doesn't overflow on small screens
       - Risk indicator: full width on mobile

    Read each file first to understand current implementation before modifying. The exact changes depend on the current component structure (which was built in Phase 2).

  </action>
  <verify>
    - `pnpm dev` starts without errors
    - Open Chrome DevTools > Device Toolbar > iPhone SE (375px): dashboard renders in single column, no horizontal scroll
    - Open iPad (768px): dashboard renders in 2 columns
    - Open desktop (1280px): dashboard renders in 4 columns
    - All top bar buttons are tappable on mobile
    - Bank name is truncated or hidden on small screens
  </verify>
  <done>Dashboard layout uses responsive padding, dashboard page uses adaptive grid, top bar has mobile-friendly touch targets, no horizontal scrolling on any viewport</done>
</task>

<task type="auto">
  <name>Task 2: Polish responsive design for data-heavy pages</name>
  <files>
    src/app/(dashboard)/compliance/page.tsx
    src/app/(dashboard)/audit-plans/page.tsx
    src/app/(dashboard)/findings/page.tsx
    src/app/(dashboard)/reports/page.tsx
  </files>
  <action>
    Read each page first to understand current structure, then apply responsive improvements.

    1. **Compliance page (`compliance/page.tsx`):**
       - Wrap the data table in `<div className="overflow-x-auto -mx-4 md:mx-0">` for horizontal scroll on mobile
       - On mobile, consider hiding lower-priority columns with `hidden md:table-cell` on: Evidence Count, Assigned To, Due Date columns. Keep visible: Requirement ID, Description (truncated), Status
       - Filter bar: stack filters vertically on mobile `flex flex-col sm:flex-row gap-2`
       - Detail modal/dialog: use full-width on mobile `max-w-full sm:max-w-2xl`
       - Trend chart: `min-h-[180px] md:min-h-[280px]`

    2. **Audit Plans page (`audit-plans/page.tsx`):**
       - Calendar grid: on mobile, show a simplified list view instead of the full month grid. Use `hidden md:block` on the calendar and a mobile list alternative, OR make the calendar horizontally scrollable
       - Engagement cards: `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4`
       - Progress bars: ensure they render correctly at narrow widths
       - Filter buttons: horizontal scroll on mobile `flex overflow-x-auto gap-2 pb-2`
       - Detail Sheet: full-width on mobile

    3. **Findings page (`findings/page.tsx`):**
       - Same table treatment as compliance: `overflow-x-auto` wrapper
       - Hide low-priority columns on mobile (Age, Assigned Auditor)
       - Keep visible: Finding ID, Title (truncated), Severity badge, Status badge
       - Filter row: stack on mobile
       - Severity badges: keep compact with abbreviated text if needed

    4. **Reports/Board Report page (`reports/page.tsx`):**
       - Executive summary: full width, stack metrics vertically on mobile
       - Tables (audit coverage, key findings): `overflow-x-auto` wrapper
       - Compliance scorecard: single column on mobile, grid on desktop
       - Recommendations: full width, no grid needed
       - Ensure `.avoid-break` class on major sections for print

    **General patterns to apply everywhere:**
    - Text size: `text-sm md:text-base` for body, `text-lg md:text-2xl` for page titles
    - Gap spacing: `gap-3 md:gap-4 lg:gap-6`
    - Card padding: `p-4 md:p-6`
    - Touch targets on filter buttons and action buttons: ensure min-height 44px on mobile
    - Use `truncate` or `line-clamp-2` on long text in table cells

    IMPORTANT: Read each file before modifying. These pages were built in Phase 2 and 3 -- understand their structure before applying responsive changes.

  </action>
  <verify>
    - `pnpm dev` starts without errors
    - Check each page at 375px width (iPhone SE): no horizontal scrollbar on viewport, tables scroll within their container
    - Check at 768px (iPad): tables show more columns, grids use 2 columns
    - Check at 1280px (desktop): full layout as designed
    - All interactive elements (filters, buttons, badges) are tappable on mobile
    - `pnpm build` succeeds
  </verify>
  <done>All data-heavy pages (compliance, audit plans, findings, reports) have responsive layouts with mobile-friendly tables, adaptive grids, and adequate touch targets</done>
</task>

</tasks>

<verification>
1. `pnpm dev` starts without errors
2. Every page checked at 375px (mobile), 768px (tablet), 1280px (desktop)
3. No horizontal scrollbar on any page at any viewport
4. Data tables scroll horizontally within their container (not the page)
5. Touch targets are at least 44px on interactive elements
6. Dashboard grid adapts: 1 col -> 2 col -> 4 col
7. Filter bars stack vertically on mobile
8. `pnpm build` succeeds
</verification>

<success_criteria>

- All screens mobile-friendly (no horizontal page scrolling)
- Touch targets adequate (min 44px)
- Adaptive grids across breakpoints
- Tables have horizontal scroll containers on mobile
- Build succeeds
  </success_criteria>

<output>
After completion, create `.planning/phases/04-polish-deploy/04-04-SUMMARY.md`
</output>
