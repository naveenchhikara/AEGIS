---
phase: 02-core-screens
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/components/dashboard/health-score-card.tsx
  - src/components/dashboard/audit-coverage-chart.tsx
  - src/components/dashboard/findings-count-cards.tsx
  - src/components/dashboard/risk-indicator-panel.tsx
  - src/components/dashboard/regulatory-calendar.tsx
  - src/components/dashboard/quick-actions.tsx
  - src/lib/icons.ts
autonomous: true

must_haves:
  truths:
    - "Health score card shows 0-100 score with red/yellow/green color indicator"
    - "Donut chart shows audited vs total entities"
    - "Count cards show Total, Critical, Open, and Overdue findings"
    - "Risk indicator panel shows overall risk level with contributing factors"
    - "Regulatory calendar shows upcoming compliance deadlines"
    - "Quick action buttons for New Finding, New Compliance Task, View Audit Plan are clickable"
  artifacts:
    - path: "src/components/dashboard/health-score-card.tsx"
      provides: "Compliance health score gauge"
      exports: ["HealthScoreCard"]
    - path: "src/components/dashboard/audit-coverage-chart.tsx"
      provides: "Donut chart for audit coverage"
      exports: ["AuditCoverageChart"]
    - path: "src/components/dashboard/findings-count-cards.tsx"
      provides: "Four metric cards for findings"
      exports: ["FindingsCountCards"]
    - path: "src/components/dashboard/risk-indicator-panel.tsx"
      provides: "Risk level with factors"
      exports: ["RiskIndicatorPanel"]
    - path: "src/components/dashboard/regulatory-calendar.tsx"
      provides: "Calendar widget with deadlines"
      exports: ["RegulatoryCalendar"]
    - path: "src/components/dashboard/quick-actions.tsx"
      provides: "Three quick action buttons"
      exports: ["QuickActions"]
  key_links:
    - from: "src/components/dashboard/audit-coverage-chart.tsx"
      to: "recharts"
      via: "import { PieChart, Pie, Cell }"
      pattern: "PieChart"
    - from: "src/components/dashboard/health-score-card.tsx"
      to: "@/data"
      via: "compliance data import"
      pattern: "demoComplianceRequirements"
    - from: "src/components/dashboard/findings-count-cards.tsx"
      to: "@/data"
      via: "findings data import"
      pattern: "findings"
---

<objective>
Build all 6 dashboard widget components: health score card, audit coverage donut chart, findings count cards, risk indicator panel, regulatory calendar, and quick action buttons.

Purpose: These widgets fulfill DASH-01 through DASH-06 requirements. Each is a self-contained component that imports demo data directly and renders a specific dashboard section.
Output: 6 new component files in src/components/dashboard/, each exporting a single named component.
</objective>

<execution_context>
@/Users/admin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/admin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/types/index.ts
@src/data/index.ts
@src/data/demo/compliance-requirements.json
@src/data/demo/findings.json
@src/data/demo/audit-plans.json
@src/lib/constants.ts
@src/lib/utils.ts
@src/lib/icons.ts
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Health score card, audit coverage donut chart, and findings count cards</name>
  <files>
    src/components/dashboard/health-score-card.tsx
    src/components/dashboard/audit-coverage-chart.tsx
    src/components/dashboard/findings-count-cards.tsx
  </files>
  <action>
    All three components are "use client" (Recharts needs client-side rendering).

    **HealthScoreCard (DASH-01):**
    - Import demoComplianceRequirements from @/data, cast to ComplianceData
    - Calculate score: Math.round((compliant / total) * 100)
    - Display as a large number (e.g., "47%") inside a Card
    - Color indicator: score >= 80 = emerald/green, 50-79 = amber/yellow, < 50 = red
    - Use a radial progress ring using Recharts RadialBarChart for visual appeal:
      ```
      <RadialBarChart innerRadius="70%" outerRadius="100%" data={[{value: score}]} startAngle={90} endAngle={-270}>
        <RadialBar dataKey="value" fill={colorByScore} cornerRadius={10} />
      </RadialBarChart>
      ```
    - Show subtitle: "{compliant} of {total} requirements compliant"
    - Card title: "Compliance Health"

    **AuditCoverageChart (DASH-02):**
    - Import auditPlans from @/data, cast to AuditData
    - Calculate: completed audits vs total planned
    - Render PieChart with Pie component (donut: innerRadius={60} outerRadius={80})
    - Two segments: "Completed" (emerald-500) and "Remaining" (slate-200)
    - Center label showing "X/Y" (completed/total)
    - Use Recharts Cell component for colors
    - Card title: "Audit Coverage"
    - Legend below chart showing completed/in-progress/planned counts

    **FindingsCountCards (DASH-03):**
    - Import findings from @/data, cast to FindingsData
    - Calculate 4 values:
      - Total findings: findings.length
      - Critical findings: filter severity === "critical"
      - Open findings: filter status !== "closed"
      - Overdue findings: filter targetDate < today AND status !== "closed"
    - Render 4 compact count cards in a 2x2 grid (grid-cols-2 gap-3)
    - Each card: icon, count value (large text), label (small text)
    - Use appropriate colors: total=blue, critical=red, open=amber, overdue=destructive
    - Icons from @/lib/icons: FileText (total), CircleAlert (critical), AlertTriangle (open), Clock (overdue)
    - Add any missing icons to src/lib/icons.ts

    All components must:
    - Use Card, CardContent, CardHeader, CardTitle from @/components/ui/card
    - Be named exports (not default)
    - Accept no props (data is imported directly for prototype)
    - Use Tailwind classes consistent with existing codebase style
  </action>
  <verify>
    - All 3 files exist and export named components
    - `pnpm build` passes with no TypeScript errors
    - Import test: each component can be imported in a test file
  </verify>
  <done>
    - HealthScoreCard renders score 0-100 with color indicator and radial chart
    - AuditCoverageChart renders donut chart with completed vs remaining
    - FindingsCountCards renders 4 cards: Total, Critical, Open, Overdue
  </done>
</task>

<task type="auto">
  <name>Task 2: Risk indicator panel, regulatory calendar, and quick actions</name>
  <files>
    src/components/dashboard/risk-indicator-panel.tsx
    src/components/dashboard/regulatory-calendar.tsx
    src/components/dashboard/quick-actions.tsx
    src/lib/icons.ts
  </files>
  <action>
    All three components are "use client".

    **RiskIndicatorPanel (DASH-04):**
    - Compute overall risk level from findings data:
      - If any critical findings open: "High Risk" (red)
      - If high findings > 2: "Medium-High Risk" (orange)
      - If any non-compliant items: "Medium Risk" (amber)
      - Else: "Low Risk" (green)
    - Display as a Card with:
      - Large risk level label with colored background badge
      - "Contributing Factors" section listing 3-4 bullet points derived from data:
        - "{N} critical findings unresolved" (if any)
        - "{N} non-compliant requirements" (if any)
        - "{N} overdue findings" (if any)
        - "CRAR monitoring in progress" (from compliance notes)
      - Each factor has an icon and severity color dot
    - Card title: "Risk Overview"

    **RegulatoryCalendar (DASH-05):**
    - Import demoComplianceRequirements from @/data
    - Extract upcoming due dates from compliance requirements (next 90 days from today, or use hardcoded dates from demo data that are nearest)
    - Since demo data dates may be in the past, use a strategy: show all compliance requirement due dates as "upcoming deadlines" regardless of actual date (prototype only)
    - Render as a Card with a vertical timeline list:
      - Each item: date (formatted), requirement title, status badge
      - Sort by due date ascending
      - Show max 5 items
      - Use ScrollArea if list is long
    - Card title: "Regulatory Calendar"
    - Include a small "View All" link at bottom

    **QuickActions (DASH-06):**
    - Three buttons in a horizontal row (or 3-col grid):
      1. "New Finding" with PlusCircle icon — links to /findings (or shows toast "Coming soon" for prototype)
      2. "New Compliance Task" with ClipboardPlus icon — links to /compliance
      3. "View Audit Plan" with Calendar icon — links to /audit-plans
    - Use Button component with variant="outline" and larger size
    - Each button: icon + label text, full width within its grid cell
    - Use Next.js Link component for navigation

    Add any missing icons to src/lib/icons.ts (PlusCircle, ClipboardPlus, ArrowRight, Flame, Target, or others needed).

    All components must:
    - Use Card, CardContent, CardHeader, CardTitle from @/components/ui/card
    - Be named exports (not default)
    - Use Tailwind classes consistent with existing codebase style
  </action>
  <verify>
    - All 3 component files exist and export named components
    - src/lib/icons.ts updated with any new icons
    - `pnpm build` passes with no TypeScript errors
  </verify>
  <done>
    - RiskIndicatorPanel shows computed risk level with contributing factors
    - RegulatoryCalendar shows upcoming compliance deadlines in timeline format
    - QuickActions shows 3 clickable buttons that navigate to correct pages
  </done>
</task>

</tasks>

<verification>
- All 6 files in src/components/dashboard/ exist
- Each exports a named component
- `pnpm build` passes
- Components use real demo data (not hardcoded placeholder text)
- Colors follow existing SEVERITY_COLORS / STATUS_COLORS patterns
</verification>

<success_criteria>
- DASH-01: Health score card with 0-100 score and color indicator
- DASH-02: Donut chart with audited/total entities
- DASH-03: Four count cards for findings metrics
- DASH-04: Risk indicator panel with contributing factors
- DASH-05: Regulatory calendar with compliance deadlines
- DASH-06: Three quick action buttons that navigate
- All components use Recharts where appropriate
- No TypeScript errors, project builds cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-screens/02-02-SUMMARY.md`
</output>
