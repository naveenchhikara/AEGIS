---
phase: 03-findings-reports
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/findings/severity-badge.tsx
  - src/components/findings/status-timeline.tsx
  - src/components/findings/status-badge.tsx
  - src/lib/finding-utils.ts
autonomous: true

must_haves:
  truths:
    - SeverityBadge displays correct colors for Critical (red), High (orange), Medium (yellow), Low (green)
    - StatusTimeline renders chronological status history with dates and actors
    - StatusBadge displays correct colors for audit statuses
    - finding-utils exports filter and sort utilities for findings data
    - recharts package installed for ComplianceScorecard component
  artifacts:
    - path: "src/components/findings/severity-badge.tsx"
      provides: "Severity badge component with RBI-compliant colors"
      exports: ["SeverityBadge"]
    - path: "src/components/findings/status-timeline.tsx"
      provides: "Timeline component for status history"
      exports: ["StatusTimeline"]
    - path: "src/components/findings/status-badge.tsx"
      provides: "Status badge for audit and finding states"
      exports: ["StatusBadge"]
    - path: "src/lib/finding-utils.ts"
      provides: "Utility functions for filtering and sorting findings"
      exports: ["filterFindings", "sortFindings", "calculateAge", "getSeverityColor"]
    - path: "package.json"
      provides: "Dependency configuration"
      contains: "recharts dependency"
  key_links:
    - from: "src/components/findings/findings-table.tsx"
      to: "src/components/findings/severity-badge.tsx"
      via: "import { SeverityBadge }"
      pattern: "SeverityBadge.*severity"
    - from: "src/components/findings/finding-detail.tsx"
      to: "src/components/findings/status-timeline.tsx"
      via: "import { StatusTimeline }"
      pattern: "StatusTimeline.*timeline"
    - from: "src/components/findings/findings-table.tsx"
      to: "src/lib/finding-utils.ts"
      via: "import { filterFindings, sortFindings }"
      pattern: "filterFindings|sortFindings"
    - from: "src/components/reports/compliance-scorecard.tsx"
      to: "recharts"
      via: "import from recharts"
      pattern: "from.*recharts"
---

<objective>
Build foundational components for Phase 3 findings and audit management screens.

Purpose: Create reusable UI components for severity indicators, status badges, and timeline visualization. These components are shared dependencies for the findings list, finding detail, audit workspace, and board report screens. Building them first enables parallel execution of subsequent feature plans.

Output: SeverityBadge, StatusBadge, StatusTimeline components, and finding utility functions
</objective>

<execution_context>
@/Users/admin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/admin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-findings-reports/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SeverityBadge component</name>
  <files>src/components/findings/severity-badge.tsx</files>
  <action>
    Create src/components/findings/ directory if not exists.

    Create severity-badge.tsx with:
    1. Import Badge from "@/components/ui/badge" and cn from "@/lib/utils"
    2. Define Severity type: "critical" | "high" | "medium" | "low"
    3. Create SeverityBadge component accepting severity prop
    4. Use exact color mapping per FIND-01 requirement:
       - critical: bg-red-100 text-red-800 hover:bg-red-200
       - high: bg-orange-100 text-orange-800 hover:bg-orange-200
       - medium: bg-yellow-100 text-yellow-800 hover:bg-yellow-200
       - low: bg-green-100 text-green-800 hover:bg-green-200
    5. Display capitalized severity name
    6. Export SeverityBadge component

    Use "use client" directive for client component.
  </action>
  <verify>File exists at src/components/findings/severity-badge.tsx with SeverityBadge export and correct color classes</verify>
  <done>SeverityBadge renders with correct colors per RBI severity levels</done>
</task>

<task type="auto">
  <name>Task 2: Create StatusBadge component</name>
  <files>src/components/findings/status-badge.tsx</files>
  <action>
    Create status-badge.tsx with:
    1. Import Badge from "@/components/ui/badge" and cn from "@/lib/utils"
    2. Define FindingStatus type: "draft" | "under-review" | "response-pending" | "action-planned" | "closed"
    3. Define AuditStatus type: "not-started" | "in-progress" | "on-hold" | "complete"
    4. Create StatusBadge component accepting type prop and value prop
    5. Color mapping per AUDT-03 requirement:
       - Finding statuses:
         - draft: bg-gray-100 text-gray-800
         - under-review: bg-blue-100 text-blue-800
         - response-pending: bg-yellow-100 text-yellow-800
         - action-planned: bg-purple-100 text-purple-800
         - closed: bg-green-100 text-green-800
       - Audit statuses:
         - not-started: bg-gray-100 text-gray-800
         - in-progress: bg-blue-100 text-blue-800
         - on-hold: bg-orange-100 text-orange-800
         - complete: bg-green-100 text-green-800
    6. Display formatted status name (capitalize, hyphen to space)
    7. Export StatusBadge component

    Use "use client" directive.
  </action>
  <verify>File exists at src/components/findings/status-badge.tsx with StatusBadge export and status type support</verify>
  <done>StatusBadge renders with correct colors for finding and audit statuses</done>
</task>

<task type="auto">
  <name>Task 3: Create StatusTimeline component</name>
  <files>src/components/findings/status-timeline.tsx</files>
  <action>
    Create status-timeline.tsx with:
    1. Import Card, CardContent from "@/components/ui/card"
    2. Import Badge from "@/components/ui/badge"
    3. Import Clock, User icons from lucide-react
    4. Import format from date-fns
    5. Define TimelineEntry interface: { id: string, date: string, action: string, actor: string, status?: string }
    6. Define StatusTimelineProps interface: { timeline: TimelineEntry[] }
    7. Create StatusTimeline component with:
       - Vertical layout with timeline connector dots and lines
       - Each entry shows action, actor, formatted date
       - Optional status badge if status prop provided
       - Use Card for each timeline entry
    8. Handle empty timeline state
    9. Export StatusTimeline component

    Use "use client" directive.
  </action>
  <verify>File exists at src/components/findings/status-timeline.tsx with StatusTimeline export</verify>
  <done>StatusTimeline renders chronological entries with dates, actors, and optional status</done>
</task>

<task type="auto">
  <name>Task 4: Create finding utility functions</name>
  <files>src/lib/finding-utils.ts</files>
  <action>
    Create finding-utils.ts with:
    1. Import Finding type from "@/types"
    2. Create filterFindings function:
       - Accepts findings array and filters object
       - Filters by: severity, status, category, assignedAuditor
       - Returns filtered array
    3. Create sortFindings function:
       - Accepts findings array and sort config
       - Sorts by: id, title, severity, status, createdAt
       - Returns sorted array
    4. Create calculateAge function:
       - Accepts finding with createdAt date
       - Returns age in days (number)
    5. Create getSeverityColor function:
       - Accepts severity string
       - Returns Tailwind color class string
    6. Create getStatusColor function:
       - Accepts status string
       - Returns Tailwind color class string
    7. Export all functions

    Use date-fns for date calculations if available, otherwise native Date.
  </action>
  <verify>File exists at src/lib/finding-utils.ts with all functions exported</verify>
  <done>Utility functions available for filtering, sorting, and calculating finding metadata</done>
</task>

<task type="auto">
  <name>Task 5: Install recharts dependency for ComplianceScorecard</name>
  <files>package.json</files>
  <action>
    Install recharts package for the ComplianceScorecard component:
    1. Run: npm install recharts
    2. Verify package.json contains recharts dependency
    3. Recharts provides BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer for compliance scorecard visualization

    This is a required dependency for Plan 03-06 Task 4 (ComplianceScorecard component).
  </action>
  <verify>package.json contains "recharts" in dependencies</verify>
  <done>recharts package installed for chart components</done>
</task>

</tasks>

<verification>
- SeverityBadge renders correct colors for all 4 severity levels
- StatusBadge renders correct colors for all finding and audit statuses
- StatusTimeline displays chronological entries with proper formatting
- finding-utils exports all 5 utility functions with correct types
- All components use "use client" directive for client-side rendering
</verification>

<success_criteria>
- src/components/findings/severity-badge.tsx exists with SeverityBadge export
- src/components/findings/status-badge.tsx exists with StatusBadge export
- src/components/findings/status-timeline.tsx exists with StatusTimeline export
- src/lib/finding-utils.ts exists with all utility functions
- recharts package installed in package.json
- Color mappings match requirements (FIND-01, AUDT-03)
- Timeline component handles empty state
</success_criteria>

<output>
After completion, create `.planning/phases/03-findings-reports/03-01-SUMMARY.md`
</output>
