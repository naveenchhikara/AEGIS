---
phase: 02-core-screens
plan: 02
type: execute
wave: 2
depends_on: [02-01]
files_modified:
  - src/components/dashboard/health-score-widget.tsx
  - src/components/dashboard/donut-chart-widget.tsx
  - src/components/dashboard/count-cards-widget.tsx
  - src/components/dashboard/risk-indicator-widget.tsx
  - src/components/dashboard/regulatory-calendar-widget.tsx
  - src/components/dashboard/quick-actions-widget.tsx
autonomous: false

must_haves:
  truths:
    - Health score widget displays 0-100 score with color indicator (red/yellow/green)
    - Donut chart shows audit coverage (audited vs total entities)
    - Count cards show: Total findings, Critical findings, Open findings, Overdue findings
    - Risk indicator panel displays overall risk level with contributing factors
    - Regulatory calendar widget shows upcoming compliance deadlines
    - Quick action buttons display: New Finding, New Compliance Task, View Audit Plan
    - All widgets use demo data from Phase 1
  artifacts:
    - path: "src/components/dashboard/health-score-widget.tsx"
      provides: "Health score display with color-coded indicator"
      exports: ["HealthScoreWidget"]
      contains: "score display with color logic (>=80 green, >=60 yellow, <60 red)"
    - path: "src/components/dashboard/donut-chart-widget.tsx"
      provides: "Donut chart for audit coverage visualization"
      exports: ["AuditCoverageDonut"]
      contains: "Recharts PieChart with innerRadius"
    - path: "src/components/dashboard/count-cards-widget.tsx"
      provides: "Count cards for finding statistics"
      exports: ["CountCardsWidget"]
      contains: "4 count cards with icons"
    - path: "src/components/dashboard/risk-indicator-widget.tsx"
      provides: "Risk level panel with contributing factors"
      exports: ["RiskIndicatorWidget"]
      contains: "overall risk with factor breakdown"
    - path: "src/components/dashboard/regulatory-calendar-widget.tsx"
      provides: "Upcoming compliance deadlines list"
      exports: ["RegulatoryCalendarWidget"]
      contains: "calendar entries from complianceCalendar data"
    - path: "src/components/dashboard/quick-actions-widget.tsx"
      provides: "Quick action buttons for common tasks"
      exports: ["QuickActionsWidget"]
      contains: "3 action buttons with Link navigation"
  key_links:
    - from: "src/components/dashboard/*"
      to: "@/data"
      via: "data imports"
      pattern: "import.*from '@/data'"
    - from: "src/components/dashboard/donut-chart-widget.tsx"
      to: "recharts"
      via: "PieChart import"
      pattern: "import.*PieChart.*from 'recharts'"
    - from: "src/components/dashboard/count-cards-widget.tsx"
      to: "@/data/findings"
      via: "findings data import"
      pattern: "findings\\.filter|findings\\.length"
    - from: "src/components/dashboard/regulatory-calendar-widget.tsx"
      to: "@/data/compliance-calendar"
      via: "complianceCalendar import"
      pattern: "complianceCalendar"
---

<objective>
Build dashboard widgets for health score, audit coverage, finding counts, risk indicator, regulatory calendar, and quick actions.

Purpose: Create six reusable dashboard widgets that display key metrics and visualizations. Each widget connects to demo data from Phase 1 and implements specific DASH requirements (DASH-01 through DASH-06).

Output: Six dashboard widget components ready to compose on main dashboard page
</objective>

<execution_context>
@/Users/admin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/admin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-core-screens/02-RESEARCH.md
@.planning/phases/02-core-screens/02-01-SUMMARY.md
@.planning/phases/01-project-setup/01-08-SUMMARY.md
@.planning/phases/01-project-setup/01-09-SUMMARY.md
@.planning/phases/01-project-setup/01-10-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create health score widget (DASH-01)</name>
  <files>src/components/dashboard/health-score-widget.tsx</files>
  <action>
    Create src/components/dashboard/ directory and health-score-widget.tsx:

    Add "use client" directive.

    Import: Card, CardContent, CardHeader, CardTitle from @/components/ui/card, cn from @/lib/utils, bankProfile from @/data

    Component features:
    - Calculate health score from complianceRequirements (compliant count / total * 100)
    - Display score as large number with color coding
    - Color logic: >=80 green (text-green-600, bg-green-100), >=60 yellow, <60 red
    - Show "out of 100" label
    - Display text status: "Good standing", "Needs attention", or "Critical"

    Use rounded circle background with centered text per RESEARCH.md code example.

    Export: HealthScoreWidget component (no props - reads from data)
  </action>
  <verify>Component exists and exports HealthScoreWidget</verify>
  <done>Health score widget created with color-coded display</done>
</task>

<task type="auto">
  <name>Task 2: Create donut chart widget (DASH-02)</name>
  <files>src/components/dashboard/donut-chart-widget.tsx</files>
  <action>
    Create src/components/dashboard/donut-chart-widget.tsx:

    Add "use client" directive.

    Import: PieChart, Pie, Cell, ResponsiveContainer, Tooltip from 'recharts', Card, CardContent, CardHeader, CardTitle from @/components/ui/card, auditPlans from @/data

    Component features:
    - Calculate audited vs pending: count audits with status 'complete' vs total
    - Transform data for chart: [{ name: 'Audited', value: X }, { name: 'Pending', value: Y }]
    - Use PieChart with innerRadius={60} for donut effect
    - Colors: green (#10b981) for audited, gray (#e5e7eb) for pending
    - Add Tooltip for hover values
    - Wrap in ResponsiveContainer for sizing

    Per RESEARCH.md Pattern 2 donut chart example.

    Export: AuditCoverageDonut component
  </action>
  <verify>Component exists with Recharts PieChart and innerRadius for donut effect</verify>
  <done>Donut chart widget created for audit coverage visualization</done>
</task>

<task type="auto">
  <name>Task 3: Create count cards widget (DASH-03)</name>
  <files>src/components/dashboard/count-cards-widget.tsx</files>
  <action>
    Create src/components/dashboard/count-cards-widget.tsx:

    Add "use client" directive.

    Import: Card, CardContent from @/components/ui/card, findings from @/data, AlertTriangle, AlertCircle, Clock, Ban icons from lucide-react

    Component features:
    - Calculate counts from findings data:
      * Total: findings.length
      * Critical: findings.filter(f => f.severity === 'critical').length
      * Open: findings.filter(f => f.status !== 'closed').length
      * Overdue: findings with age > 30 days (calculate from createdAt)
    - Create 4 cards array with: label, value, icon, color
    - Grid layout: grid-cols-2 md:grid-cols-4 gap-4
    - Each card: icon on right, label + value on left
    - Icon colors: gray (total), red (critical), blue (open), orange (overdue)

    Per RESEARCH.md code example.

    Export: CountCardsWidget component
  </action>
  <verify>Component displays 4 count cards with calculated values from findings</verify>
  <done>Count cards widget created for finding statistics</done>
</task>

<task type="auto">
  <name>Task 4: Create risk indicator widget (DASH-04)</name>
  <files>src/components/dashboard/risk-indicator-widget.tsx</files>
  <action>
    Create src/components/dashboard/risk-indicator-widget.tsx:

    Add "use client" directive.

    Import: Card, CardContent, CardHeader, CardTitle from @/components/ui/card, Badge from @/components/ui/badge, findings from @/data, AlertTriangle, TrendingUp, Shield icons from lucide-react

    Component features:
    - Calculate overall risk from findings:
      * Count critical findings = high risk contributing factor
      * Count high findings = medium risk contributing factor
      * Overall level: "Low" if 0 critical, "Medium" if 1-2 critical, "High" if 3+ critical
    - Display overall risk level with Badge (green/yellow/red)
    - List contributing factors:
      * Critical findings count
      * High findings count
      * Overdue findings count
    - Use icon for each factor type
    - Add brief risk assessment text

    Export: RiskIndicatorWidget component
  </action>
  <verify>Component displays overall risk level and contributing factors from findings</verify>
  <done>Risk indicator widget created with level and factor breakdown</done>
</task>

<task type="auto">
  <name>Task 5: Create regulatory calendar widget (DASH-05)</name>
  <files>src/components/dashboard/regulatory-calendar-widget.tsx</files>
  <action>
    Create src/components/dashboard/regulatory-calendar-widget.tsx:

    Add "use client" directive.

    Import: Card, CardContent, CardHeader, CardTitle from @/components/ui/card, Badge from @/components/ui/badge, complianceCalendar from @/data, Calendar icon from lucide-react

    Component features:
    - Import complianceCalendar data
    - Filter to upcoming dates (dueDate >= today)
    - Sort by dueDate ascending
    - Display top 5-7 upcoming items
    - For each item: title, due date (formatted), priority badge
    - Priority colors: high (red), medium (yellow), low (gray)
    - Add "View all calendar" link (placeholder for now)

    Date format: "Mon DD" (e.g., "Feb 15")

    Export: RegulatoryCalendarWidget component
  </action>
  <verify>Component displays upcoming compliance deadlines with dates and priorities</verify>
  <done>Regulatory calendar widget created with upcoming deadlines</done>
</task>

<task type="auto">
  <name>Task 6: Create quick actions widget (DASH-06)</name>
  <files>src/components/dashboard/quick-actions-widget.tsx</files>
  <action>
    Create src/components/dashboard/quick-actions-widget.tsx:

    Add "use client" directive.

    Import: Card, CardContent, CardHeader, CardTitle from @/components/ui/card, Button from @/components/ui/button, Link from 'next/link', Plus, FileText, Calendar icons from lucide-react

    Component features:
    - 3 quick action buttons in vertical stack or grid
    - Actions:
      1. "New Finding" -> Links to /findings (placeholder, Phase 3)
      2. "New Compliance Task" -> Links to /compliance (placeholder action)
      3. "View Audit Plan" -> Links to /audit-plan
    - Each button: icon on left, text label, chevron on right
    - Use Button variant="outline" for clean look
    - Add hover states

    Note: DASH-07 (DAKSH quick action) was removed per ROADMAP success criterion #21.

    Export: QuickActionsWidget component
  </action>
  <verify>Component displays 3 action buttons with Link navigation</verify>
  <done>Quick actions widget created with navigation links</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Six dashboard widgets for health score, audit coverage, finding counts, risk indicator, regulatory calendar, and quick actions</what-built>
  <how-to-verify>
    Note: Widgets are components only, not yet rendered on a page. This checkpoint verifies component creation.

    1. Check all 6 widget files exist in src/components/dashboard/
    2. Verify TypeScript compiles: npx tsc --noEmit
    3. Verify no import errors
    4. (Optional) Create test file to verify components render without errors:
       - Create src/test-dashboard-widgets.tsx
       - Import all 6 widgets
       - Check for any immediate errors
       - Delete test file after verification

    All widgets should:
    - Have "use client" directive
    - Import from @/data correctly
    - Use shadcn/ui Card components
    - Have proper TypeScript types
  </how-to-verify>
  <resume-signal>Type "approved" if all widget files are created and compile successfully, or describe issues</resume-signal>
</task>

</tasks>

<verification>
- All 6 widget files exist in src/components/dashboard/
- Each widget has "use client" directive
- HealthScoreWidget calculates score from complianceRequirements
- AuditCoverageDonut uses Recharts PieChart
- CountCardsWidget calculates counts from findings
- RiskIndicatorWidget shows risk level from findings
- RegulatoryCalendarWidget shows dates from complianceCalendar
- QuickActionsWidget has Link navigation
- TypeScript compiles without errors
</verification>

<success_criteria>
- 6 dashboard widgets created
- All widgets connect to Phase 1 demo data
- Health score color-coded correctly (>=80 green, >=60 yellow, <60 red)
- Donut chart uses Recharts with innerRadius
- Count cards calculate from findings data
- Risk indicator derives from findings severity
- Calendar widget shows upcoming deadlines
- Quick actions navigate with Link components
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-screens/02-02-SUMMARY.md`
</output>
