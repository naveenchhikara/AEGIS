# Plan 04-07: Application Deployment and Demo Preparation

**Wave:** 7 of 7 (Final)
**Autonomous:** false (human verification checkpoint)
**Depends on:** 04-05 (infrastructure ready), 04-06 (SSL configured)
**Blocked by:** None

## Overview

Deploy the AEGIS application to production, perform end-to-end testing across all features and languages, and prepare demo scripts for client presentations. This final wave completes the clickable prototype milestone.

## Tasks

### Task 1: Build production bundle locally
1. Run production build:
   ```bash
   npm run build
   ```
2. Verify build completes without errors
3. Check `.next/` directory contains compiled assets
4. Test production build locally:
   ```bash
   npm run start
   ```
5. Verify: All pages load correctly at `localhost:3000`

### Task 2: Deploy to AWS Lightsail
1. Create deployment artifact:
   ```bash
   # Option A: Git clone on server
   git clone <repo-url> /var/www/aegis

   # Option B: rsync from local
   rsync -avz --exclude 'node_modules' --exclude '.next' \
     ./ ubuntu@<ip>:/var/www/aegis/
   ```
2. Install dependencies on server:
   ```bash
   cd /var/www/aegis
   npm ci --production
   ```
3. Build on server (if not built locally):
   ```bash
   npm run build
   ```

### Task 3: Start application with PM2
1. Start PM2 ecosystem:
   ```bash
   cd /var/www/aegis
   pm2 start ecosystem.config.js
   ```
2. Save PM2 configuration:
   ```bash
   pm2 save
   pm2 startup
   ```
3. Verify app is running:
   ```bash
   pm2 status
   pm2 logs aegis
   ```
4. Test: Visit `https://aegis.yourdomain.com` - should see login page

### Task 4: End-to-end testing on production
1. **Login flow**:
   - Visit production URL
   - Login with any email
   - Verify redirect to dashboard
   - Verify English labels display correctly

2. **Language switching**:
   - Test all 4 languages (EN, HI, MR, GU)
   - Verify labels update on all pages
   - Verify language persists after refresh

3. **Navigation testing**:
   - Click each sidebar item
   - Verify all pages load without errors
   - Verify URL updates correctly

4. **Data display**:
   - Dashboard shows correct counts
   - Compliance table displays 50+ requirements
   - Findings table displays 35 findings
   - Audit plan shows all scheduled audits

5. **Mobile testing**:
   - Test on phone or browser emulation
   - Verify hamburger menu works
   - Verify responsive layout
   - Verify touch targets workable

### Task 5: Verify all 14 Phase 4 success criteria
1. [ ] All UI labels have Hindi translations
2. [ ] All UI labels have Marathi translations
3. [ ] All UI labels have Gujarati translations
4. [ ] Language switcher in top bar persists preference
5. [ ] Switching language updates all visible labels immediately
6. [ ] Banking terminology appears translated (note: for expert review)
7. [ ] All screens are mobile-friendly
8. [ ] No horizontal scrolling on any screen size
9. [ ] Touch targets are large enough on mobile (44x44px minimum)
10. [ ] Application deployed to AWS Lightsail Mumbai
11. [ ] SSL certificate configured and valid
12. [ ] Custom domain configured
13. [ ] Production URL loads all screens correctly
14. [ ] Demo works on mobile devices and tablets

### Task 6: Create 15-minute demo script
1. Create `.planning/demo-script-15min.md`:
   - **Opening (2 min)**: Welcome, context (UCB compliance challenges)
   - **Dashboard (3 min)**: Health score, key metrics, risk overview
   - **Compliance Registry (3 min)**: 50+ RBI requirements, status tracking
   - **Findings (3 min)**: Critical findings, action tracking
   - **Board Report (2 min)**: Executive summary, print preview
   - **Language demo (1 min)**: Switch to Hindi/Marathi
   - **Closing (1 min)**: Next steps, pilot discussion

### Task 7: Create 30-minute demo script
1. Create `.planning/demo-script-30min.md`:
   - **Opening (3 min)**: Welcome, AEGIS value proposition
   - **Login & Language (2 min)**: Multi-language capability
   - **Dashboard Deep Dive (7 min)**: All widgets, explain data sources
   - **Compliance Registry (7 min)**: Filters, detail modals, RBI references
   - **Audit Planning (4 min)**: Calendar view, engagement tracking
   - **Findings Management (4 min)**: Detail view, timeline, workflow
   - **Board Report (2 min)**: Print/Export, executive summary
   - **Mobile Demo (1 min)**: Show responsive design on phone
   - **Q&A & Next Steps (5 min)**: Discussion, pilot proposal

### Task 8: Final human verification checkpoint - prototype complete
1. **Production URL accessible**: `https://aegis.yourdomain.com` loads
2. **All features working**: Login, navigation, all screens
3. **All languages working**: EN, HI, MR, GU display correctly
4. **Mobile tested**: Works on phone and tablet
5. **SSL valid**: No browser warnings, lock icon shows
6. **Data loads**: All demo data displays correctly
7. **Print works**: Board report prints cleanly
8. **Demo scripts ready**: Both 15-min and 30-min versions documented

## Must Haves

- Application deployed and accessible via custom domain
- HTTPS works with valid SSL certificate
- All 4 languages display correctly
- Responsive design works on mobile and tablet
- All 47 v1 requirements implemented
- Demo scripts prepared
- Production URL tested end-to-end

## Artifacts Created

| File | Purpose |
|------|---------|
| `.planning/demo-script-15min.md` | Concise demo for quick meetings |
| `.planning/demo-script-30min.md` | Detailed demo with Q&A time |
| Production deployment | Live site at https://aegis.yourdomain.com |
| PM2 running app | Process managed with auto-restart |

## Key Links

- Production URL → points to Lightsail server
- PM2 → manages Next.js process
- Nginx → reverse proxy with SSL termination
- Demo scripts → guide client presentations

## Milestone Completion

**Clickable Prototype Milestone Complete When:**
- [x] All 6 screens are accessible via navigation
- [x] All 47 v1 requirements are implemented
- [x] Demo data (Sahyadri UCB) loads correctly on all screens
- [x] Application is deployed to AWS Mumbai with valid SSL
- [x] Demo works on desktop, tablet, and mobile
- [x] All 4 languages (EN/HI/MR/GU) work
- [x] Demo script is ready for client presentations
- [ ] 3 client demos are scheduled ← **Next action after deployment**

---

*Wave 7 completes Phase 4 and the Clickable Prototype milestone.*
